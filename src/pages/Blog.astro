---
// src/pages/blog.astro
import Header from "./Header.astro";
// import { translations } from "../i18n/index.js";

// Datos simulados (Máquinas / Posts)
const posts = [
    {
        date: "Feb 04",
        permissions: "-rwxr-xr-x",
        user: "root",
        size: "4.0K",
        title: "hackthebox-machine-01.md",
        category: "CTF / Easy",
        url: "#",
        status: "pwned",
    },
    {
        date: "Jan 28",
        permissions: "-rw-r--r--",
        user: "sibabale",
        size: "2.1K",
        title: "configurar-firewall-linux.sh",
        category: "Tutorial / Linux",
        url: "#",
        status: "public",
    },
    {
        date: "Jan 15",
        permissions: "drwx------",
        user: "root",
        size: "DIR",
        title: "pentesting-notes/",
        category: "Notes",
        url: "#",
        status: "private",
    },
];
---

<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <title>Blog | Terminal Access</title>

        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Poppins:wght@300;400&family=Fira+Code:wght@400;500&display=swap"
            rel="stylesheet"
        />
    </head>

    <body class="bg-theme-bg text-theme-text overflow-x-hidden font-sans">
        <Header />

        <main class="min-h-screen pt-32 pb-20 px-4 md:px-12 bg-theme-bg">
            <div class="max-w-5xl mx-auto mb-8 opacity-0 reveal-blog-title">
                <span
                    class="font-montserrat font-medium text-sm text-theme-muted uppercase tracking-[0.2em]"
                >
                    // laboratorio_y_notas
                </span>
            </div>

            <div
                class="opacity-0 reveal-terminal w-full max-w-5xl mx-auto bg-[#0c0c0c] border border-white/10 rounded-lg shadow-[0_0_50px_rgba(0,0,0,0.5)] overflow-hidden font-mono text-sm md:text-base relative z-10"
            >
                <div
                    class="bg-[#1a1a1a] px-4 py-3 flex items-center justify-between border-b border-white/5"
                >
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-full bg-[#ff5f56]"></div>
                        <div class="w-3 h-3 rounded-full bg-[#ffbd2e]"></div>
                        <div class="w-3 h-3 rounded-full bg-[#27c93f]"></div>
                    </div>
                    <div class="text-xs text-gray-500 font-sans tracking-wide">
                        sibabale@lab: ~/blog
                    </div>
                    <div class="w-10"></div>
                </div>

                <div class="p-6 md:p-8 text-gray-300 min-h-[500px]">
                    <div class="flex flex-wrap gap-2 mb-6">
                        <span class="text-green-400 font-bold"
                            >root@sibabale:~/blog#</span
                        >
                        <span class="text-white typing-command"
                            >ls -la --color=auto</span
                        >
                    </div>

                    <div class="space-y-1">
                        <div
                            class="grid grid-cols-[100px_1fr] md:grid-cols-[120px_80px_80px_100px_1fr] gap-4 text-gray-500 text-xs md:text-sm mb-4 border-b border-white/5 pb-2 opacity-0 reveal-content"
                        >
                            <span class="hidden md:block">PERMISSIONS</span>
                            <span class="hidden md:block">USER</span>
                            <span class="hidden md:block">SIZE</span>
                            <span>DATE</span>
                            <span>NAME</span>
                        </div>

                        <div class="space-y-2">
                            {
                                posts.map((post) => (
                                    <a
                                        href={post.url}
                                        class="group grid grid-cols-[1fr] md:grid-cols-[120px_80px_80px_100px_1fr] gap-2 md:gap-4 items-center hover:bg-white/5 p-2 rounded transition-colors cursor-pointer blog-item opacity-0"
                                    >
                                        <span class="text-gray-600 font-mono text-xs hidden md:block">
                                            {post.permissions}
                                        </span>
                                        <span class="text-yellow-500/80 font-mono text-xs hidden md:block">
                                            {post.user}
                                        </span>
                                        <span class="text-gray-600 font-mono text-xs hidden md:block">
                                            {post.size}
                                        </span>
                                        <span class="text-blue-400 font-mono text-xs block md:text-gray-500">
                                            {post.date}
                                        </span>

                                        <div class="flex items-center gap-3">
                                            <span
                                                class={`font-bold ${post.status === "pwned" ? "text-red-400" : "text-theme-text"} group-hover:underline decoration-white/30 underline-offset-4`}
                                            >
                                                {post.title}
                                            </span>
                                            {post.status === "pwned" && (
                                                <span class="text-[10px] bg-red-500/20 text-red-400 px-1.5 py-0.5 rounded border border-red-500/30">
                                                    PWNED
                                                </span>
                                            )}
                                        </div>
                                    </a>
                                ))
                            }
                        </div>

                        <div
                            class="pt-8 flex items-center gap-2 opacity-0 reveal-cursor"
                        >
                            <span class="text-green-400 font-bold"
                                >root@sibabale:~/blog#</span
                            >
                            <span class="w-2.5 h-5 bg-gray-400 animate-pulse"
                            ></span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <script>
            import { gsap } from "gsap";

            const tl = gsap.timeline();
            tl.to([".reveal-blog-title", ".reveal-terminal"], {
                y: 0,
                opacity: 1,
                duration: 0.8,
                stagger: 0.2,
                ease: "power3.out",
            });
            tl.from(
                ".typing-command",
                {
                    width: 0,
                    duration: 0.5,
                    ease: "steps(12)",
                },
                "-=0.2",
            );
            tl.to(".reveal-content", { opacity: 1, duration: 0.2 });
            tl.to(".blog-item", {
                opacity: 1,
                x: 0,
                duration: 0.1,
                stagger: 0.05,
                ease: "power1.out",
            });
            tl.to(".reveal-cursor", { opacity: 1, duration: 0.2 });

            gsap.set([".reveal-blog-title", ".reveal-terminal"], { y: 20 });
            gsap.set(".blog-item", { x: -10 });
        </script>

        <style is:global>
            /* Reset básico si no usas Tailwind en todo */
            body {
                margin: 0;
                padding: 0;
            }

            /* Forzar tema oscuro en terminal */
            .reveal-terminal {
                background-color: #0c0c0c !important;
                border-color: rgba(255, 255, 255, 0.1) !important;
            }
        </style>
    </body>
</html>
